---
import TanaLayout from '~/layouts/TanaLayout.astro';
const title = `Accesso in corso - Victorian Monkey`;
---
<TanaLayout metadata={{ title }}>
  <section class="flex justify-center items-center w-[100%] min-h-[60vh]">
    <div class="w-full max-w-md text-center space-y-4">
      <h1 class="text-2xl font-semibold">Stiamo completando l'accesso...</h1>
      <p class="text-secondary/80 dark:text-white/80">Attendi qualche istante.</p>
    </div>
  </section>
</TanaLayout>

<script>
  // This page is no longer needed with Logto, but kept for backwards compatibility
  // Logto handles callbacks via /api/auth/callback
  document.addEventListener('DOMContentLoaded', () => {
    // Check if we're coming from a callback
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('code')) {
      // Redirect to callback handler
      window.location.replace('/api/auth/callback' + window.location.search);
    } else {
      // Redirect to login if no callback
      window.location.replace('/tana/login');
    }
  });
</script>
